(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-meituan-win"],{"0a6f":function(t,i,a){"use strict";a.r(i);var e=a("d305"),s=a("5507");for(var n in s)"default"!==n&&function(t){a.d(i,t,function(){return s[t]})}(n);a("ee97");var c,r=a("f0c5"),u=Object(r["a"])(s["default"],e["b"],e["c"],!1,null,"484d0ae2",null,!1,e["a"],c);i["default"]=u.exports},"11ea":function(t,i,a){i=t.exports=a("2350")(!1),i.push([t.i,'.fixed[data-v-484d0ae2]{position:fixed;z-index:99}.VerticalNav.nav[data-v-484d0ae2]{width:%?200?%;white-space:normal}.VerticalNav.nav .cu-item[data-v-484d0ae2]{width:100%;text-align:center;background-color:#fff;margin:0;border:none;height:50px;position:relative}.VerticalNav.nav .cu-item.cur[data-v-484d0ae2]{background-color:#f1f1f1}.VerticalNav.nav .cu-item.cur[data-v-484d0ae2]:after{content:"";width:%?8?%;height:%?30?%;border-radius:%?10?% 0 0 %?10?%;position:absolute;background-color:currentColor;top:0;right:%?0?%;bottom:0;margin:auto}.VerticalBox[data-v-484d0ae2]{display:-webkit-box;display:-webkit-flex;display:flex}.VerticalMain[data-v-484d0ae2]{background-color:#f1f1f1;-webkit-box-flex:1;-webkit-flex:1;flex:1}.content[data-v-484d0ae2]{width:%?330?%!important}',""])},5507:function(t,i,a){"use strict";a.r(i);var e=a("ec00"),s=a.n(e);for(var n in e)"default"!==n&&function(t){a.d(i,t,function(){return e[t]})}(n);i["default"]=s.a},"8fd0":function(t,i,a){var e=a("11ea");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=a("4f06").default;s("7ecf3995",e,!0,{sourceMap:!1,shadowMode:!1})},d305:function(t,i,a){"use strict";var e,s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",[a("v-uni-view",{staticClass:"fixed"},[a("cu-custom",{attrs:{isBack:!0,bgColor:"bg-shadeTop text-white",url:"/pages/meituan/index"}},[a("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),a("template",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.win_name))])],2)],1),a("v-uni-swiper",{staticClass:"screen-swiper round-dot",attrs:{"indicator-dots":!0,circular:!0,autoplay:!0,interval:"5000",duration:"500"}},t._l(4,function(t,i){return a("v-uni-swiper-item",{key:i},[a("v-uni-image",{attrs:{src:"https://ossweb-img.qq.com/images/lol/web201310/skin/big3900"+i+".jpg",mode:"aspectFill"}})],1)}),1),a("v-uni-view",{staticClass:"VerticalBox"},[a("v-uni-scroll-view",{staticClass:"VerticalNav nav",staticStyle:{height:"calc(100vh - 375upx)"},attrs:{"scroll-y":!0,"scroll-with-animation":!0,"scroll-top":t.verticalNavTop}},t._l(t.classify,function(i,e){return a("v-uni-view",{key:e,staticClass:"cu-item",class:e==t.tabCur?"text-green cur":"",attrs:{"data-id":e},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.TabSelect.apply(void 0,arguments)}}},[t._v("Tab-"+t._s(i))])}),1),a("v-uni-scroll-view",{staticClass:"VerticalMain",staticStyle:{height:"calc(100vh - 375upx)"},attrs:{"scroll-y":!0,"scroll-with-animation":!0,"scroll-into-view":"main-"+t.mainCur},on:{scroll:function(i){arguments[0]=i=t.$handleEvent(i),t.VerticalMain.apply(void 0,arguments)}}},t._l(t.menu[t.tabCur],function(i,e){return a("v-uni-view",{key:e,staticClass:"padding-top padding-lr",attrs:{id:"main-"+e}},[0==e?a("v-uni-view",{staticClass:"cu-bar solid-bottom bg-white"},[a("v-uni-view",{staticClass:"action"},[a("v-uni-text",{staticClass:"cuIcon-title text-green"}),t._v("Tab-"+t._s(i.classify_name))],1)],1):t._e(),a("v-uni-view",{staticClass:"cu-list menu-avatar"},[a("v-uni-view",{staticClass:"cu-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.lookmenu(i.menu_id)}}},[a("v-uni-view",{staticClass:"cu-avatar round lg",style:"background-image:url("+i.menu_img+");"},["1"==i.menu_recommend?a("v-uni-view",{staticClass:"cu-tag badge"},[t._v("推荐")]):t._e()],1),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"text-grey"},[a("v-uni-text",{staticClass:"text-cut"},[t._v(t._s(i.menu_name))]),a("v-uni-view",{staticClass:"cu-tag round bg-orange sm"},[t._v(t._s(i.menu_unit))]),a("v-uni-view",{staticClass:"cu-tag round bg-orange sm",staticStyle:{margin:"0px 0px 0px auto"},attrs:{id:i.menu_id},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.addcare.apply(void 0,arguments)}}},[t._v("+")])],1),a("v-uni-view",{staticClass:"text-gray text-sm flex"},[a("v-uni-text",{staticClass:"text-cut"},[t._v(t._s(i.menu_describe))])],1)],1)],1)],1)],1)}),1)],1),a("v-uni-view",{staticClass:"cu-bar bg-white tabbar border shop"},[a("v-uni-view",{staticClass:"action",staticStyle:{margin:"0 auto"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickcare.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"cuIcon-cart"},[a("v-uni-view",{staticClass:"cu-tag badge"},[t._v(t._s(t.care_num))])],1),t._v("购物车")],1)],1)],1)},n=[];a.d(i,"b",function(){return s}),a.d(i,"c",function(){return n}),a.d(i,"a",function(){return e})},ec00:function(t,i,a){"use strict";var e=a("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e(a("6b96")),n={components:{cuCustom:s.default},data:function(){return{host:"http://gs.itsse.cn:9999/api/v1",win_id:0,list:[],classify:[],menu:[],tabCur:0,mainCur:0,verticalNavTop:0,load:!0,user_id:0,stusersid:0,care_num:0,win_name:""}},onLoad:function(t){this.win_id=t.id,console.log(this.win_id);var i=uni.getStorageSync("user_id");this.user_id=i},onReady:function(){uni.hideLoading()},methods:{getStusersId:function(){var t=this;uni.request({url:"".concat(this.host,"/stusers_id"),data:{win_id:this.win_id},success:function(i){t.stusersid=i.data.data[0].stuser_id}})},addcare:function(t){var i=this;uni.request({url:"".concat(this.host,"/add_care"),method:"post",data:{user_id:this.user_id,menu_id:t.target.id,stusersid:this.stusersid},success:function(){i.getcare()}})},TabSelect:function(t){this.tabCur=t.currentTarget.dataset.id,this.mainCur=t.currentTarget.dataset.id,this.verticalNavTop=50*(t.currentTarget.dataset.id-1)},VerticalMain:function(t){var i=this,a=0;if(this.load){for(var e=function(t){var e=uni.createSelectorQuery().select("#main-"+i.list[t].id);e.fields({size:!0},function(e){i.list[t].top=a,a+=e.height,i.list[t].bottom=a}).exec()},s=0;s<this.list.length;s++)e(s);this.load=!1}var n=t.detail.scrollTop+10;for(s=0;s<this.list.length;s++)if(n>this.list[s].top&&n<this.list[s].bottom)return this.verticalNavTop=50*(this.list[s].id-1),this.tabCur=this.list[s].id,console.log(n),!1},getClassify:function(){var t=this;uni.request({url:"".concat(this.host,"/classify_list_st/").concat(this.win_id),success:function(i){t.menu=i.data.data.menu,t.classify=i.data.data.classify}})},lookmenu:function(t){uni.setStorage({key:"winid",data:{win_id:this.win_id}}),uni.reLaunch({url:"/pages/meituan/menu?id=".concat(t)})},getcare:function(){var t=this;console.log(this.user_id),uni.request({url:"".concat(this.host,"/care_st"),data:{user_id:this.user_id},success:function(i){t.care_num=i.data.data[0].care_num}})},clickcare:function(){var t=getCurrentPages();uni.reLaunch({url:"/pages/meituan/myCart?win_id=".concat(this.win_id,"&path=").concat(t[0].route)})},getwin:function(){var t=this;console.log(this.win_id),uni.request({url:"".concat(this.host,"/stusers_id"),data:{win_id:this.win_id},success:function(i){console.log(i),t.win_name=i.data.data[0].win_name}})}},onShow:function(){this.getStusersId(),this.getClassify(),this.getcare()}};i.default=n},ee97:function(t,i,a){"use strict";var e=a("8fd0"),s=a.n(e);s.a}}]);