(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-self_tag_foods-self_tag_foods"],{"2bee":function(t,a,e){"use strict";var i,n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"self_tag_our"},[e("cu-custom",{attrs:{bgColor:"bg-gradual-green",isBack:!0,url:"/pages/edit_self/edit_self"}},[e("template",{attrs:{slot:"backText"},slot:"backText"}),e("template",{attrs:{slot:"content"},slot:"content"},[t._v("我爱吃的美食")])],2),e("v-uni-view",{staticClass:"bg-white fixed  padding cf"},[e("v-uni-view",{staticClass:"tag_icon fl",attrs:{"data-target":"DialogModal1"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showModal.apply(void 0,arguments)}}},[t._v("+")]),e("v-uni-view",{staticClass:"tag_text fl text-red text-lg",attrs:{"data-target":"DialogModal1"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showModal.apply(void 0,arguments)}}},[t._v("创建标签")]),e("v-uni-view",{staticClass:"cu-modal",class:"DialogModal1"==t.modalName?"show":""},[e("v-uni-view",{staticClass:"cu-dialog"},[e("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[e("v-uni-view",{staticClass:"content"},[t._v("创建新标签")]),e("v-uni-view",{staticClass:"action",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.hideModal.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),e("v-uni-view",{staticClass:"padding-xl"},[e("v-uni-input",{attrs:{type:"text",placeholder:"请创建你的标签"},model:{value:t.inputvalue,callback:function(a){t.inputvalue=a},expression:"inputvalue"}})],1),e("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-button",{staticClass:"cu-btn line-green text-green",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.hideModal.apply(void 0,arguments)}}},[t._v("取消")]),e("v-uni-button",{staticClass:"cu-btn bg-green margin-left",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.saveModal.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"tag_list"},t._l(t.tagList,function(a,i){return e("v-uni-view",{key:i,staticClass:"cu-bar bg-white",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.CheckboxChange(i)}}},[e("v-uni-checkbox-group",{staticClass:"block"},[e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title check_title"},[t._v(t._s(a.tag_name))]),e("v-uni-checkbox",{staticClass:"round ",class:a.checked?"checked":"",attrs:{checked:!!a.checked}})],1)],1)],1)}),1)],1)},s=[];e.d(a,"b",function(){return n}),e.d(a,"c",function(){return s}),e.d(a,"a",function(){return i})},"861c":function(t,a,e){"use strict";var i=e("288e");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("20d6"),e("28a5");var n=i(e("f499"));e("ac6a");var s={onLoad:function(){var t=uni.getStorageSync("user_id");this.id=t,this.getdata()},data:function(){return{modalName:null,inputvalue:"",tagList:[],baseUrl:"http://gs.itsse.cn:9999/api/v1",id:"",our_tag:[],num:0}},onUnload:function(){var t=this;this.our_tag=[],this.tagList.forEach(function(a,e){return 1==a.checked?t.our_tag.push(a):[]}),uni.setStorageSync("ourFoods",(0,n.default)(this.our_tag))},methods:{showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},saveModal:function(){return this.tagList.push({id:this.tagList.length,tag_name:this.inputvalue,checked:!1}),uni.request({url:this.baseUrl+"/add_foods_tag/".concat(this.id),method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{tags:(0,n.default)(this.tagList),id:this.id},success:function(t){1==t.data.ok&&uni.showToast({title:"添加成功"})},fail:function(t){console.log(t)}}),this.inputvalue="",this.modalName=null},getdata:function(){var t=this;uni.request({url:this.baseUrl+"/our_foods/".concat(this.id),method:"GET",success:function(a){1!==a.data.ok&&uni.showToast({title:"请求失败",image:"../../static/toast/error.png"});var e=a.data.data.tag_foods_name.split(","),i=e;i.forEach(function(a,e){t.tagList.push({id:e,tag_name:a,checked:!1})}),uni.getStorage({key:"ourFoods",success:function(a){t.our_tag=JSON.parse(a.data),t.our_tag.forEach(function(a){var e=t.tagList.findIndex(function(t){return a.id==t.id});t.tagList[e].checked=!0})}})},fail:function(t){console.log(t)}})},CheckboxChange:function(t){this.tagList[t].checked=!this.tagList[t].checked}}};a.default=s},"9be4":function(t,a,e){"use strict";e.r(a);var i=e("2bee"),n=e("e8e6");for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);e("f7aa");var o,c=e("f0c5"),u=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"313236c8",null,!1,i["a"],o);a["default"]=u.exports},a8f8:function(t,a,e){a=t.exports=e("2350")(!1),a.push([t.i,".tag_icon[data-v-313236c8]{margin-top:%?10?%;border:%?1?% solid red;margin-right:%?30?%;width:%?40?%;height:%?40?%;text-align:center;line-height:%?40?%;font-weight:700;border-radius:100%}.check_title[data-v-313236c8]{width:%?600?%}",""])},dbd5:function(t,a,e){var i=e("a8f8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("890d7d88",i,!0,{sourceMap:!1,shadowMode:!1})},e8e6:function(t,a,e){"use strict";e.r(a);var i=e("861c"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,function(){return i[t]})}(s);a["default"]=n.a},f7aa:function(t,a,e){"use strict";var i=e("dbd5"),n=e.n(i);n.a}}]);