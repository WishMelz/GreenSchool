(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-edit_self-edit_self"],{2313:function(t,i,a){"use strict";a.r(i);var e=a("41ef"),s=a("a9ff");for(var n in s)"default"!==n&&function(t){a.d(i,t,function(){return s[t]})}(n);a("6538");var o,u=a("f0c5"),l=Object(u["a"])(s["default"],e["b"],e["c"],!1,null,"3affa6ec",null,!1,e["a"],o);i["default"]=l.exports},"2df2":function(t,i,a){i=t.exports=a("2350")(!1),i.push([t.i,'.photo_top[data-v-3affa6ec]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:%?500?%}.photo_top .imageItem[data-v-3affa6ec]{width:66.6%;height:%?500?%}.photo_top .imageItem uni-image[data-v-3affa6ec]{height:%?500?%}.photo_uplod[data-v-3affa6ec]{width:33.3%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.photo_uplod .imageUpload[data-v-3affa6ec]{height:%?250?%;font-size:%?150?%}.content_tag[data-v-3affa6ec]{width:%?600?%}.cu-form-group uni-picker[data-v-3affa6ec]:after{content:""}.cu-form-group uni-picker .picker[data-v-3affa6ec]{text-align:left}',""])},"2e08":function(t,i,a){var e=a("9def"),s=a("9744"),n=a("be13");t.exports=function(t,i,a,o){var u=String(n(t)),l=u.length,c=void 0===a?" ":String(a),r=e(i);if(r<=l||""==c)return u;var f=r-l,d=s.call(c,Math.ceil(f/c.length));return d.length>f&&(d=d.slice(0,f)),o?d+u:u+d}},"41ef":function(t,i,a){"use strict";var e,s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"edit_self"},[a("cu-custom",{attrs:{bgColor:"bg-gradual-green",isBack:!0,url:"/pages/self/self"}},[a("template",{attrs:{slot:"backText"},slot:"backText"}),a("template",{attrs:{slot:"content"},slot:"content"},[t._v("编辑个人信息")])],2),a("v-uni-view",{staticClass:"photo"},[a("v-uni-view",{staticClass:"photo_top"},[a("v-uni-view",{staticClass:"imageItem"},[a("v-uni-image",{attrs:{src:t.imgList[t.imgList.length-1],mode:"aspectFill"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ChooseImage.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"photo_uplod solid-bottom"},[a("v-uni-view",{staticClass:"imageUpload"},[a("v-uni-image",{attrs:{src:t.imgList1[t.imgList1.length-1],mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ChooseImage1.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"imageUpload"},[a("v-uni-image",{attrs:{src:t.imgList2[t.imgList2.length-1],mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ChooseImage2.apply(void 0,arguments)}}})],1)],1)],1)],1),a("v-uni-view",{staticClass:"cu-bar bg-white padding"},[a("v-uni-view",{staticClass:"tag_box"},[a("v-uni-view",{staticClass:"tag_title"},[a("v-uni-text",[t._v("我的标签")])],1),a("v-uni-view",{staticClass:"flex cf padding-sm",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.our_tags.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:" fl text-bold text-xl margin-right-sm text-bold"},[t._v("#")]),t.ourTags.length>0?a("v-uni-view",{staticClass:" content_tag fl"},t._l(t.ourTags,function(i){return a("v-uni-view",{staticClass:"cu-tag bg-black margin-left-xs radius"},[t._v(t._s(i.tag_name))])}),1):a("v-uni-view",{staticClass:"content_tag fl margin-top-xs"},[a("v-uni-input",{attrs:{type:"text",placeholder:"添加我的标签",disabled:!0}})],1),a("v-uni-view",{staticClass:" cuIcon-right fr"})],1)],1)],1),a("v-uni-view",{staticClass:"cu-bar bg-white padding  solid-bottom"},[a("v-uni-view",{staticClass:"tag_box"},[a("v-uni-view",{staticClass:"tag_title"},[a("v-uni-text",[t._v("我的兴趣")])],1),a("v-uni-view",{staticClass:"flex cf padding-sm",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.our_sports.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"cuIcon-brand icon_tag fl text-bold text-xl margin-right-sm"}),t.ourSports.length>0?a("v-uni-view",{staticClass:" content_tag fl"},t._l(t.ourSports,function(i){return a("v-uni-view",{staticClass:"cu-tag bg-orange margin-left-xs radius"},[t._v(t._s(i.tag_name))])}),1):a("v-uni-view",{staticClass:"content_tag fl "},[a("v-uni-input",{attrs:{type:"text",placeholder:"我热爱的运动",disabled:!0}})],1),a("v-uni-view",{staticClass:" cuIcon-right fr"})],1),a("v-uni-view",{staticClass:"flex cf padding-sm",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.our_games.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"cuIcon-game icon_tag fl text-bold text-xl margin-right-sm"}),t.ourGames.length>0?a("v-uni-view",{staticClass:" content_tag fl"},t._l(t.ourGames,function(i){return a("v-uni-view",{staticClass:"cu-tag bg-purple margin-left-xs radius"},[t._v(t._s(i.tag_name))])}),1):a("v-uni-view",{staticClass:"content_tag fl "},[a("v-uni-input",{attrs:{type:"text",placeholder:"我喜欢的游戏",disabled:!0}})],1),a("v-uni-view",{staticClass:" cuIcon-right fr"})],1),a("v-uni-view",{staticClass:"flex cf padding-sm",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.our_music.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"cuIcon-musicfill icon_tag fl text-bold text-xl margin-right-sm"}),t.ourMusic.length>0?a("v-uni-view",{staticClass:" content_tag fl"},t._l(t.ourMusic,function(i){return a("v-uni-view",{staticClass:"cu-tag bg-cyan margin-left-xs radius"},[t._v(t._s(i.tag_name))])}),1):a("v-uni-view",{staticClass:"content_tag fl  "},[a("v-uni-input",{attrs:{type:"text",placeholder:"我常听的音乐",disabled:!0}})],1),a("v-uni-view",{staticClass:" cuIcon-right fr"})],1),a("v-uni-view",{staticClass:"flex cf padding-sm",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.our_foods.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"cuIcon-presentfill icon_tag fl text-bold text-xl margin-right-sm"}),t.ourFoods.length>0?a("v-uni-view",{staticClass:" content_tag fl"},t._l(t.ourFoods,function(i){return a("v-uni-view",{staticClass:"cu-tag bg-pink margin-left-xs radius"},[t._v(t._s(i.tag_name))])}),1):a("v-uni-view",{staticClass:"content_tag fl "},[a("v-uni-input",{attrs:{type:"text",placeholder:"我爱吃的美食",disabled:!0}})],1),a("v-uni-view",{staticClass:" cuIcon-right fr"})],1)],1)],1),a("v-uni-view",{staticClass:"form_self"},[a("v-uni-form",[a("v-uni-view",{staticClass:"cu-form-group flex flex-wrap padding"},[a("v-uni-view",{staticClass:"basis-xl padding-top-sm"},[a("v-uni-text",{staticClass:"title"},[t._v("昵称")])],1),a("v-uni-view",{staticClass:"action basis-xl "},[a("v-uni-input",{attrs:{name:"input"},model:{value:t.formlist.username,callback:function(i){t.$set(t.formlist,"username",i)},expression:"formlist.username"}})],1)],1),a("v-uni-view",{staticClass:"cu-form-group flex flex-wrap padding"},[a("v-uni-view",{staticClass:"basis-xl padding-top-sm"},[a("v-uni-view",{staticClass:"title"},[t._v("性别")])],1),a("v-uni-view",{staticClass:"action basis-xl "},[a("v-uni-picker",{attrs:{value:t.sexindex,range:t.sexbox},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.PickerChange.apply(void 0,arguments)}}},[t._v(t._s(t.sexindex>-1?t.sexbox[t.sexindex]:"请先选择性别"))])],1)],1),a("v-uni-view",{staticClass:"cu-form-group flex flex-wrap padding"},[a("v-uni-view",{staticClass:"basis-xl padding-top-sm"},[a("v-uni-view",{staticClass:"title"},[t._v("生日")])],1),a("v-uni-view",{staticClass:"action basis-xl "},[a("v-uni-picker",{attrs:{mode:"date",value:t.birthday,start:"1990-00-00",end:"2019-12-12"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.DateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.birthday))])],1)],1)],1),a("v-uni-view",{staticClass:"cu-form-group flex flex-wrap padding"},[a("v-uni-view",{staticClass:"basis-xl padding-top-sm"},[a("v-uni-text",{staticClass:"title"},[t._v("学校")])],1),a("v-uni-view",{staticClass:"action basis-xl "},[a("v-uni-input",{attrs:{name:"input",disabled:!0},model:{value:t.formlist.school,callback:function(i){t.$set(t.formlist,"school",i)},expression:"formlist.school"}})],1)],1),a("v-uni-view",{staticClass:"cu-form-group flex flex-wrap padding"},[a("v-uni-view",{staticClass:"basis-xl padding-top-sm"},[a("v-uni-text",{staticClass:"title"},[t._v("签名")])],1),a("v-uni-view",{staticClass:"action basis-xl "},[a("v-uni-textarea",{attrs:{placeholder:"请填写你的个性签名"},model:{value:t.formlist.sign,callback:function(i){t.$set(t.formlist,"sign",i)},expression:"formlist.sign"}})],1)],1),a("v-uni-view",{staticClass:"padding-bottom-xl flex flex-direction"},[a("v-uni-button",{staticClass:"cu-btn bg-green lg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.saveselfInfo.apply(void 0,arguments)}}},[t._v("保存修改")])],1),a("v-uni-view",{staticClass:"padding-bottom-xl flex flex-direction"},[a("v-uni-button",{staticClass:"cu-btn bg-grey lg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.layout.apply(void 0,arguments)}}},[t._v("退出登录")])],1)],1)],1)],1)},n=[];a.d(i,"b",function(){return s}),a.d(i,"c",function(){return n}),a.d(i,"a",function(){return e})},6538:function(t,i,a){"use strict";var e=a("b499"),s=a.n(e);s.a},9744:function(t,i,a){"use strict";var e=a("4588"),s=a("be13");t.exports=function(t){var i=String(s(this)),a="",n=e(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(i+=i))1&n&&(a+=i);return a}},a9ff:function(t,i,a){"use strict";a.r(i);var e=a("c3df"),s=a.n(e);for(var n in e)"default"!==n&&function(t){a.d(i,t,function(){return e[t]})}(n);i["default"]=s.a},b499:function(t,i,a){var e=a("2df2");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=a("4f06").default;s("ebb6fb34",e,!0,{sourceMap:!1,shadowMode:!1})},c3df:function(t,i,a){"use strict";var e=a("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("f576");var s=e(a("f499")),n=e(a("59ad")),o=e(a("bd86")),u={onShow:function(){var t=this;this.getselfInfo(),uni.getStorage({key:"games",success:function(i){t.ourGames=JSON.parse(i.data)}}),uni.getStorage({key:"ourTags",success:function(i){t.ourTags=JSON.parse(i.data)}}),uni.getStorage({key:"ourSports",success:function(i){t.ourSports=JSON.parse(i.data)}}),uni.getStorage({key:"ourMusic",success:function(i){t.ourMusic=JSON.parse(i.data)}}),uni.getStorage({key:"ourFoods",success:function(i){t.ourFoods=JSON.parse(i.data)}}),uni.getStorage({key:"photo_one",success:function(i){t.imgList1.push(i.data)}}),uni.getStorage({key:"photo_two",success:function(i){t.imgList2.push(i.data)}})},data:function(){var t;return t={imgList:[],ourGames:[],ourTags:[],ourSports:[],ourFoods:[],ourMusic:[],sexindex:-1,sexbox:["男","女"],birthday:"1970-01-01",basicArr:[],formlist:[],baseUrl:"http://gs.itsse.cn:9999/api/v1",id:""},(0,o.default)(t,"imgList",[]),(0,o.default)(t,"imgList1",["http://hbimg.b0.upaiyun.com/9817192fbf6914a38e77e0d289253e6d2f8d88b71635-VDp6dR_fw658"]),(0,o.default)(t,"imgList2",["http://hbimg.b0.upaiyun.com/9817192fbf6914a38e77e0d289253e6d2f8d88b71635-VDp6dR_fw658"]),t},methods:{showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},saveselfInfo:function(){var t=this,i=(0,n.default)(new Date(this.formlist.birthday).getTime()/1e3);this.formlist.birthday=i,uni.showModal({title:"保存修改",content:"亲。你确认要修改个人信息吗？",cancelText:"取消，再看看",cancelColor:"#D1372C",confirmText:"确认修改",confirmColor:"#09BB07",success:function(i){if(1==i.cancel)return uni.showToast({title:"已取消修改"});uni.request({url:t.baseUrl+"/update_info/".concat(t.id),method:"PUT",data:{info:(0,s.default)(t.formlist)},success:function(t){if(1==t.data.ok)return uni.showToast({title:"修改成功"})}})}})},getselfInfo:function(){var t=this,i=uni.getStorageSync("user_id");this.id=i,uni.request({url:this.baseUrl+"/selfInfo/".concat(i),data:{id:this.id},method:"GET",success:function(i){t.formlist=i.data.data,t.imgList.push(i.data.data.head_img);var a=new Date(1e3*t.formlist.birthday),e=a.getFullYear(),s=(a.getMonth()+1+"").padStart(2,"0"),n=(a.getDate()+"").padStart(2,"0"),o="".concat(e,"-").concat(s,"-").concat(n);t.formlist.birthday=o,t.birthday=t.formlist.birthday,t.sexindex=t.formlist.sex,null==t.formlist.birthday&&(t.formlist.birthday="1970-01-01")}})},PickerChange:function(t){this.sexindex=t.detail.value,this.formlist.sex=this.sexindex},DateChange:function(t){this.birthday=t.detail.value,this.formlist.birthday=this.birthday},ChooseImage:function(){var t=this;uni.showLoading({title:"loading"}),uni.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(i){uni.hideLoading();var a=i.tempFilePaths;uni.uploadFile({url:"http://gs.itsse.cn:9999/api/v1/upload_phone",filePath:a[0],name:"file",formData:{user:"test"},success:function(i){var a=JSON.parse(i.data);t.imgList.push(a.info),t.formlist.head_img=t.imgList[t.imgList.length-1]}})},error:function(t){console.log(t)}})},ChooseImage1:function(){var t=this;uni.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(i){var a=i.tempFilePaths;uni.uploadFile({url:"http://gs.itsse.cn:9999/api/v1/upload_phone",filePath:a[0],name:"file",formData:{user:"test"},success:function(i){var a=JSON.parse(i.data);t.imgList1.push(a.info),uni.setStorage({key:"photo_one",data:a.info})}})},error:function(t){console.log(t)}})},ChooseImage2:function(){var t=this;uni.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(i){var a=i.tempFilePaths;uni.uploadFile({url:"http://gs.itsse.cn:9999/api/v1/upload_phone",filePath:a[0],name:"file",formData:{user:"test"},success:function(i){var a=JSON.parse(i.data);t.imgList2.push(a.info),uni.setStorage({key:"photo_two",data:a.info})}})},error:function(t){console.log(t)}})},layout:function(){uni.showLoading({title:"正在加载中..."}),setTimeout(function(){uni.hideLoading(),uni.clearStorage(),uni.reLaunch({url:"../login/login"})},300)},our_sports:function(){uni.showLoading({title:"loading"}),setTimeout(function(){uni.navigateTo({url:"../self_tag_sports/self_tag_sports"}),uni.hideLoading()},300)},our_tags:function(){uni.showLoading({title:"loading"}),setTimeout(function(){uni.navigateTo({url:"../self_tag_our/self_tag_our"}),uni.hideLoading()},300)},our_games:function(){uni.showLoading({title:"loading"}),setTimeout(function(){uni.navigateTo({url:"../self_tag_games/self_tag_games"}),uni.hideLoading()},300)},our_music:function(){uni.showLoading({title:"loading"}),setTimeout(function(){uni.navigateTo({url:"../self_tag_music/self_tag_music"}),uni.hideLoading()},300)},our_foods:function(){uni.showLoading({title:"loading"}),setTimeout(function(){uni.navigateTo({url:"../self_tag_foods/self_tag_foods"}),uni.hideLoading()},300)}}};i.default=u},f576:function(t,i,a){"use strict";var e=a("5ca1"),s=a("2e08"),n=a("a25f");e(e.P+e.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(n),"String",{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0,!0)}})}}]);