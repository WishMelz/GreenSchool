(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ca6704f"],{"159b":function(e,t,r){var a=r("da84"),n=r("fdbc"),i=r("17c2"),s=r("9112");for(var l in n){var o=a[l],u=o&&o.prototype;if(u&&u.forEach!==i)try{s(u,"forEach",i)}catch(c){u.forEach=i}}},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,n=r("b301");e.exports=n("forEach")?function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},4160:function(e,t,r){"use strict";var a=r("23e7"),n=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4ba8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menuList"},[r("el-row",{attrs:{span:24}},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:""+this.$route.matched[0].path}}},[e._v("首页")]),r("el-breadcrumb-item",[r("a",{attrs:{href:""+this.$route.matched[1].path}},[e._v("菜品管理")])])],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("div",{staticStyle:{"margin-top":"15px"}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},on:{change:e.getMenu_st},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.getMenu_st},slot:"append"})],1)],1)])],1),r("el-card",[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary"}},[e._v("菜品管理 ------- menu")])],1),r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.adddialogVisible=!0}}},[e._v("添加菜品")])],1),r("el-col",{attrs:{span:6}},[r("el-select",{attrs:{placeholder:"请选择窗口列表"},on:{change:e.getMenu_st},model:{value:e.queryInfo.win_id,callback:function(t){e.$set(e.queryInfo,"win_id",t)},expression:"queryInfo.win_id"}},e._l(e.winlist,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-col",{attrs:{span:6}},[r("el-select",{attrs:{placeholder:"请选择分类列表"},on:{change:e.getMenu_st},model:{value:e.queryInfo.classify_id,callback:function(t){e.$set(e.queryInfo,"classify_id",t)},expression:"queryInfo.classify_id"}},e._l(e.classifylist,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menulist,"row-class-name":e.tableRowClassName}},[r("el-table-column",{attrs:{type:"index",label:"索引"}}),r("el-table-column",{attrs:{prop:"menu_name",label:"菜品名称"}}),r("el-table-column",{attrs:{prop:"menu_img",label:"菜品图片",width:"130"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.menu_img,fit:"['fill', 'contain', 'cover', 'none', 'scale-down']"}})]}}])}),r("el-table-column",{attrs:{prop:"menu_price",label:"菜品价格"}}),r("el-table-column",{attrs:{prop:"menu_unit",label:"菜品分量"}}),r("el-table-column",{attrs:{prop:"recommend",label:"推荐状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.recommend?r("el-button",{attrs:{type:"primary"}},[e._v("推荐")]):e._e(),1==t.row.recommend?r("el-button",{attrs:{type:"danger"}},[e._v("不推荐")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"classify_name",label:"分类"}}),r("el-table-column",{attrs:{prop:"win_name",label:"所属菜馆"}}),r("el-table-column",{attrs:{prop:"users_id",label:"所属人员"}}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return e.change_win(t.row.id)}}},[e._v("修改")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.delete_win(t.row.id,t.row.win_menu_id)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[2,5,10,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{staticStyle:{"background-color":"#409EFF"},attrs:{title:"添加菜品",visible:e.adddialogVisible,width:"70%","before-close":e.handleClose},on:{"update:visible":function(t){e.adddialogVisible=t},close:e.handleClose}},[r("el-form",{ref:"addruleref",staticClass:"demo-ruleForm",attrs:{model:e.addruleForm,rules:e.addrules,"label-width":"240px","label-position":"left"}},[r("el-form-item",{attrs:{label:"菜品名称",prop:"menu_name"}},[r("el-input",{model:{value:e.addruleForm.menu_name,callback:function(t){e.$set(e.addruleForm,"menu_name",t)},expression:"addruleForm.menu_name"}})],1),r("el-form-item",{attrs:{label:"菜品描述",prop:"menu_describe"}},[r("el-input",{model:{value:e.addruleForm.menu_describe,callback:function(t){e.$set(e.addruleForm,"menu_describe",t)},expression:"addruleForm.menu_describe"}})],1),r("el-form-item",{attrs:{label:"菜品价格（数字 单位为元）",prop:"menu_price"}},[r("el-input",{model:{value:e.addruleForm.menu_price,callback:function(t){e.$set(e.addruleForm,"menu_price",t)},expression:"addruleForm.menu_price"}})],1),r("el-form-item",{attrs:{label:"菜品分量（列如 20元/份 ）",prop:"menu_unit"}},[r("el-input",{model:{value:e.addruleForm.menu_unit,callback:function(t){e.$set(e.addruleForm,"menu_unit",t)},expression:"addruleForm.menu_unit"}})],1),r("el-form-item",{attrs:{label:"菜品图片",prop:"menu_img"}},[r("el-upload",{attrs:{action:e.action,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handsuccess}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),r("el-form-item",{attrs:{label:"是否推荐",prop:"recommend"}},[1==e.addruleForm.recommend?r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addruleForm.recommend=0}}},[e._v("不推荐")]):e._e(),0==e.addruleForm.recommend?r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addruleForm.recommend=1}}},[e._v("推荐")]):e._e()],1),r("el-form-item",{attrs:{label:"所属窗口",prop:"win_id"}},e._l(e.winlist,(function(t,a){return r("el-radio",{key:a,attrs:{label:a},model:{value:e.addruleForm.win_id,callback:function(t){e.$set(e.addruleForm,"win_id",t)},expression:"addruleForm.win_id"}},[e._v(e._s(t.label))])})),1),r("el-form-item",{attrs:{label:"所属分类",prop:"stclassify_id"}},e._l(e.classifylist,(function(t,a){return r("el-radio",{key:a,attrs:{label:a},model:{value:e.addruleForm.stclassify_id,callback:function(t){e.$set(e.addruleForm,"stclassify_id",t)},expression:"addruleForm.stclassify_id"}},[e._v(e._s(t.label))])})),1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.adddialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.add_win}},[e._v("确 定")])],1)],1),r("el-dialog",{staticStyle:{"background-color":"#F56C6C"},attrs:{title:"修改窗口",visible:e.changedialogVisible,width:"50%","before-close":e.changehandleClose},on:{"update:visible":function(t){e.changedialogVisible=t},close:e.changehandleClose}},[r("el-form",{ref:"changeruleref",staticClass:"demo-ruleForm",attrs:{model:e.changeruleForm,rules:e.changerules,"label-width":"140px","label-position":"left"}},[r("el-form-item",{attrs:{label:"窗口名称",prop:"win_name"}},[r("el-input",{model:{value:e.changeruleForm.win_name,callback:function(t){e.$set(e.changeruleForm,"win_name",t)},expression:"changeruleForm.win_name"}})],1),r("el-form-item",{attrs:{label:"修改的用户的名称",prop:"users_id"}},[r("el-input",{attrs:{disabled:""},model:{value:e.changeruleForm.users_id,callback:function(t){e.$set(e.changeruleForm,"users_id",t)},expression:"changeruleForm.users_id"}})],1),r("el-form-item",{attrs:{label:"窗口的介绍",prop:"win_inter"}},[r("el-input",{model:{value:e.changeruleForm.win_inter,callback:function(t){e.$set(e.changeruleForm,"win_inter",t)},expression:"changeruleForm.win_inter"}})],1),r("el-form-item",{attrs:{label:"修改窗口售卖当天开始时间",prop:"win_start"}},[r("el-time-picker",{attrs:{placeholder:"任意时间点"},model:{value:e.changeruleForm.win_start,callback:function(t){e.$set(e.changeruleForm,"win_start",t)},expression:"changeruleForm.win_start"}})],1),r("el-form-item",{attrs:{label:"修改窗口售卖当天结束时间",prop:"win_end"}},[r("el-time-picker",{attrs:{placeholder:"任意时间点"},model:{value:e.changeruleForm.win_end,callback:function(t){e.$set(e.changeruleForm,"win_end",t)},expression:"changeruleForm.win_end"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.changedialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.changetwo_win}},[e._v("确 定")])],1)],1)],1)},n=[],i=(r("4160"),r("c975"),r("0d03"),r("b0c0"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("159b"),r("96cf"),{data:function(){return{action:"http://47.104.29.236:9999/api/v1/upload_phone",dialogImageUrl:"",dialogVisible:!1,menulist:[],users_id:"",queryInfo:{pagenum:1,pagesize:10,query:"",users_id:sessionStorage.getItem("_userID")||1,win_id:"",classify_id:""},total:0,classifyValue:"",classifylist:[{key:"",label:"所有",value:""}],winlist:[{key:"",label:"所有",value:""}],adddialogVisible:!1,addruleForm:{menu_name:"",menu_describe:"",menu_price:"",menu_unit:"",menu_img:"",recommend:"0",win_id:"",stclassify_id:"",users_id:window.sessionStorage.getItem("_userID")||1},addrules:{win_name:[{required:!0,message:"请输入窗口名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],users_id:[{required:!0,message:"请输入添加的用户的名称",trigger:"blur"}],win_inter:[{required:!0,message:"请输入窗口的介绍",trigger:"blur"},{min:1,max:80,message:"长度在 1 到 80 个字符",trigger:"blur"}],win_start:[{required:!0,message:"请输入售卖开始时间",trigger:"blur"}],win_end:[{required:!0,message:"请输入售卖结束时间",trigger:"blur"}]},changedialogVisible:!1,changeruleForm:{win_name:"",users_id:"",win_inter:"",win_start:"",win_end:""},changerules:{win_name:[{required:!0,message:"请输入修改的窗口名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],users_id:[{required:!0,message:"请输入修改的用户的名称",trigger:"blur"}],win_inter:[{required:!0,message:"请输入修改的窗口的介绍",trigger:"blur"},{min:1,max:80,message:"长度在 1 到 80 个字符",trigger:"blur"}],win_start:[{required:!0,message:"请输入修改的当天售卖开始时间",trigger:"blur"}],win_end:[{required:!0,message:"请输入修改的当天售卖结束时间",trigger:"blur"}]}}},methods:{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handsuccess:function(e){this.addruleForm.menu_img=e.info},getclassify:function(){var e,t,r=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$axios.get("/classify_st_ht",{params:{users_id:this.queryInfo.queryInfo}}));case 2:e=a.sent,t=[],e.data.data[1].forEach((function(e){-1==t.indexOf(e.stclassify_id)&&(t.push(e.stclassify_id),r.classifylist.push({key:e.stclassify_id,label:e.name,value:e.stclassify_id}))}));case 5:case"end":return a.stop()}}),null,this)},getwin:function(){var e,t,r=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$axios.get("/win_st_ht",{params:{users_id:this.queryInfo.queryInfo}}));case 2:e=a.sent,t=[],e.data.data[1].forEach((function(e){-1==t.indexOf(e.id)&&(t.push(e.id),r.winlist.push({key:e.id,label:e.win_name,value:e.id}))}));case 5:case"end":return a.stop()}}),null,this)},changehandleClose:function(){this.$refs.changeruleref.resetFields(),this.changedialogVisible=!1},change_win:function(){this.$message.error("改个屁，给我删了，再添")},changetwo_win:function(){},handleClose:function(){this.$refs.addruleref.resetFields(),this.adddialogVisible=!1},add_win:function(){var e=this;this.$refs.addruleref.validate((function(t){if(!t)return e.$message.error("请填写完整的数据");e.$axios.post("/menu_st_ht",e.addruleForm).then((function(t){if("200"!==t.data.state.code)return e.$message.error(t.data.state.msg);e.addruleForm.menu_id=t.data.data.insertId,e.$axios.post("/win_menu_st_ht",e.addruleForm).then((function(r){if("200"!==r.data.state.code)return e.$message.error(r.data.state.msg);e.$message.success(r.data.state.msg),e.$message.success(t.data.state.msg),e.getMenu_st(),e.adddialogVisible=!1}))}))}))},delete_win:function(e,t){var r=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.$axios.delete("/win_menu_id/".concat(e),{data:{win_menu_id:t}}).then((function(e){if("200"!==e.data.state.code)return r.$message.error(e.data.state.msg);r.$message({type:"success",message:"删除成功!"}),r.getMenu_st()}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},getMenu_st:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$axios.get("/menu_st_ht",{params:this.queryInfo}));case 2:e=t.sent,this.total=e.data.data[0][0].total,this.menulist=e.data.data[1];case 5:case"end":return t.stop()}}),null,this)},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getMenu_st()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getMenu_st()},tableRowClassName:function(e){var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""}},created:function(){this.getMenu_st(),this.getclassify(),this.getwin(),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e}}}),s=i,l=(r("6b69"),r("2877")),o=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=o.exports},"6b69":function(e,t,r){"use strict";var a=r("da39"),n=r.n(a);n.a},b0c0:function(e,t,r){var a=r("83ab"),n=r("9bf2").f,i=Function.prototype,s=i.toString,l=/^\s*function ([^ (]*)/,o="name";!a||o in i||n(i,o,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(e){return""}}})},b301:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!r||!a((function(){r.call(null,t||function(){throw 1},1)}))}},b727:function(e,t,r){var a=r("f8c2"),n=r("44ad"),i=r("7b0b"),s=r("50c4"),l=r("65f0"),o=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,c=4==e,d=6==e,m=5==e||d;return function(f,g,p,h){for(var _,b,w=i(f),y=n(w),v=a(g,p,3),x=s(y.length),F=0,k=h||l,$=t?k(f,x):r?k(f,0):void 0;x>F;F++)if((m||F in y)&&(_=y[F],b=v(_,F,w),e))if(t)$[F]=b;else if(b)switch(e){case 3:return!0;case 5:return _;case 6:return F;case 2:o.call($,_)}else if(c)return!1;return d?-1:u||c?c:$}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},c975:function(e,t,r){"use strict";var a=r("23e7"),n=r("4d64").indexOf,i=r("b301"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,o=i("indexOf");a({target:"Array",proto:!0,forced:l||o},{indexOf:function(e){return l?s.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},da39:function(e,t,r){},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-3ca6704f.8fc0d650.js.map